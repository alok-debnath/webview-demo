<!doctype html>
<!-- saved from url=(0069)https://69676c557a52a28d2e1d01c4-%2Dverdant-dodol-8aace7.netlify.app/ -->
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebView Capability Test</title>
    <script src="./index_files/saved_resource"></script>
    <style>
      *,
      ::before,
      ::after {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
        --tw-contain-size: ;
        --tw-contain-layout: ;
        --tw-contain-paint: ;
        --tw-contain-style: ;
      }
      ::backdrop {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
        --tw-contain-size: ;
        --tw-contain-layout: ;
        --tw-contain-paint: ;
        --tw-contain-style: ;
      } /* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */
      *,
      ::after,
      ::before {
        box-sizing: border-box;
        border-width: 0;
        border-style: solid;
        border-color: #e5e7eb;
      }
      ::after,
      ::before {
        --tw-content: "";
      }
      :host,
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        -moz-tab-size: 4;
        tab-size: 4;
        font-family:
          ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
          "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        font-feature-settings: normal;
        font-variation-settings: normal;
        -webkit-tap-highlight-color: transparent;
      }
      body {
        margin: 0;
        line-height: inherit;
      }
      hr {
        height: 0;
        color: inherit;
        border-top-width: 1px;
      }
      abbr:where([title]) {
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: inherit;
        font-weight: inherit;
      }
      a {
        color: inherit;
        text-decoration: inherit;
      }
      b,
      strong {
        font-weight: bolder;
      }
      code,
      kbd,
      pre,
      samp {
        font-family:
          ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-feature-settings: normal;
        font-variation-settings: normal;
        font-size: 1em;
      }
      small {
        font-size: 80%;
      }
      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }
      sub {
        bottom: -0.25em;
      }
      sup {
        top: -0.5em;
      }
      table {
        text-indent: 0;
        border-color: inherit;
        border-collapse: collapse;
      }
      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-variation-settings: inherit;
        font-size: 100%;
        font-weight: inherit;
        line-height: inherit;
        letter-spacing: inherit;
        color: inherit;
        margin: 0;
        padding: 0;
      }
      button,
      select {
        text-transform: none;
      }
      button,
      input:where([type="button"]),
      input:where([type="reset"]),
      input:where([type="submit"]) {
        -webkit-appearance: button;
        background-color: transparent;
        background-image: none;
      }
      :-moz-focusring {
        outline: auto;
      }
      :-moz-ui-invalid {
        box-shadow: none;
      }
      progress {
        vertical-align: baseline;
      }
      ::-webkit-inner-spin-button,
      ::-webkit-outer-spin-button {
        height: auto;
      }
      [type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }
      ::-webkit-search-decoration {
        -webkit-appearance: none;
      }
      ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }
      summary {
        display: list-item;
      }
      blockquote,
      dd,
      dl,
      figure,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      hr,
      p,
      pre {
        margin: 0;
      }
      fieldset {
        margin: 0;
        padding: 0;
      }
      legend {
        padding: 0;
      }
      menu,
      ol,
      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      dialog {
        padding: 0;
      }
      textarea {
        resize: vertical;
      }
      input::placeholder,
      textarea::placeholder {
        opacity: 1;
        color: #9ca3af;
      }
      [role="button"],
      button {
        cursor: pointer;
      }
      :disabled {
        cursor: default;
      }
      audio,
      canvas,
      embed,
      iframe,
      img,
      object,
      svg,
      video {
        display: block;
        vertical-align: middle;
      }
      img,
      video {
        max-width: 100%;
        height: auto;
      }
      [hidden]:where(:not([hidden="until-found"])) {
        display: none;
      }
      .mx-auto {
        margin-left: auto;
        margin-right: auto;
      }
      .mb-2 {
        margin-bottom: 0.5rem;
      }
      .flex {
        display: flex;
      }
      .hidden {
        display: none;
      }
      .h-64 {
        height: 16rem;
      }
      .h-full {
        height: 100%;
      }
      .min-h-screen {
        min-height: 100vh;
      }
      .w-full {
        width: 100%;
      }
      .max-w-md {
        max-width: 28rem;
      }
      .items-center {
        align-items: center;
      }
      .justify-center {
        justify-content: center;
      }
      .space-y-3 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-y-reverse: 0;
        margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));
        margin-bottom: calc(0.75rem * var(--tw-space-y-reverse));
      }
      .space-y-4 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-y-reverse: 0;
        margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
        margin-bottom: calc(1rem * var(--tw-space-y-reverse));
      }
      .overflow-hidden {
        overflow: hidden;
      }
      .rounded {
        border-radius: 0.25rem;
      }
      .rounded-xl {
        border-radius: 0.75rem;
      }
      .bg-blue-600 {
        --tw-bg-opacity: 1;
        background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1));
      }
      .bg-gray-100 {
        --tw-bg-opacity: 1;
        background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));
      }
      .bg-gray-200 {
        --tw-bg-opacity: 1;
        background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1));
      }
      .bg-gray-700 {
        --tw-bg-opacity: 1;
        background-color: rgb(55 65 81 / var(--tw-bg-opacity, 1));
      }
      .bg-green-600 {
        --tw-bg-opacity: 1;
        background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1));
      }
      .bg-white {
        --tw-bg-opacity: 1;
        background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));
      }
      .object-cover {
        object-fit: cover;
      }
      .p-4 {
        padding: 1rem;
      }
      .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }
      .text-lg {
        font-size: 1.125rem;
        line-height: 1.75rem;
      }
      .text-sm {
        font-size: 0.875rem;
        line-height: 1.25rem;
      }
      .font-semibold {
        font-weight: 600;
      }
      .text-gray-500 {
        --tw-text-opacity: 1;
        color: rgb(107 114 128 / var(--tw-text-opacity, 1));
      }
      .text-gray-700 {
        --tw-text-opacity: 1;
        color: rgb(55 65 81 / var(--tw-text-opacity, 1));
      }
      .text-white {
        --tw-text-opacity: 1;
        color: rgb(255 255 255 / var(--tw-text-opacity, 1));
      }
      .shadow {
        --tw-shadow:
          0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --tw-shadow-colored:
          0 1px 3px 0 var(--tw-shadow-color),
          0 1px 2px -1px var(--tw-shadow-color);
        box-shadow:
          var(--tw-ring-offset-shadow, 0 0 #0000),
          var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
      }
    </style>
  </head>

  <body class="bg-gray-100 min-h-screen p-4">
    <div class="max-w-md mx-auto space-y-4">
      <!-- Location Box -->
      <div class="bg-white rounded-xl shadow p-4">
        <h2 class="text-lg font-semibold mb-2">Current Location</h2>
        <div id="location" class="text-sm text-gray-700">
          Fetching location...
        </div>
      </div>

      <!-- Image Preview -->
      <div class="bg-white rounded-xl shadow p-4">
        <h2 class="text-lg font-semibold mb-2">Captured / Selected Image</h2>
        <div
          class="w-full h-64 bg-gray-200 rounded flex items-center justify-center overflow-hidden"
        >
          <img id="preview" class="object-cover w-full h-full hidden" />
          <span id="noImage" class="text-gray-500">No image</span>
        </div>
      </div>

      <!-- Controls -->
      <div class="bg-white rounded-xl shadow p-4 space-y-3">
        <button
          onclick="handleTakePhoto()"
          class="w-full bg-blue-600 text-white py-2 rounded"
        >
          Take Photo
        </button>

        <button
          onclick="handlePickImage()"
          class="w-full bg-green-600 text-white py-2 rounded"
        >
          Pick Image
        </button>

        <button
          onclick="handlePickFile()"
          class="w-full bg-gray-700 text-white py-2 rounded"
        >
          Pick File
        </button>

        <button
          onclick="handleShowNotification()"
          class="w-full bg-blue-600 text-white py-2 rounded"
        >
          Show Notification
        </button>

        <div id="fileName" class="text-sm text-gray-700"></div>
      </div>
    </div>

    <!-- Hidden browser inputs -->
    <input
      id="imageInput"
      type="file"
      accept="image/*"
      capture="environment"
      class="hidden"
    />
    <input id="fileInput" type="file" class="hidden" />

    <script>
      const preview = document.getElementById("preview");
      const noImage = document.getElementById("noImage");
      const fileNameEl = document.getElementById("fileName");

      const hasNative = typeof window.NativeBridge !== "undefined";

      /* ---------------- LOCATION ---------------- */
      function startLocationTracking() {
        if (!navigator.geolocation) {
          document.getElementById("location").innerText =
            "Geolocation not supported";
          return;
        }

        navigator.geolocation.watchPosition(
          (pos) => {
            const { latitude, longitude, accuracy } = pos.coords;
            document.getElementById("location").innerText =
              `Lat: ${latitude.toFixed(6)}\nLng: ${longitude.toFixed(6)}\nAccuracy: ${accuracy}m`;
          },
          (err) => {
            document.getElementById("location").innerText = err.message;
          },
          { enableHighAccuracy: true },
        );
      }

      startLocationTracking();

      /* ---------------- IMAGE HANDLING ---------------- */
      function showImage(src) {
        preview.src = src;
        preview.classList.remove("hidden");
        noImage.classList.add("hidden");
      }

      function handleTakePhoto() {
        if (hasNative) {
          window.NativeBridge.takePhoto();
        } else {
          document.getElementById("imageInput").click();
        }
      }

      function handlePickImage() {
        if (hasNative) {
          window.NativeBridge.pickImage();
        } else {
          document.getElementById("imageInput").click();
        }
      }

      function handlePickFile() {
        if (hasNative) {
          window.NativeBridge.pickFile();
        } else {
          document.getElementById("fileInput").click();
        }
      }

      function handleShowNotification() {
        // Check for NativeBridge at runtime since it's injected after page load
        const hasNativeBridge =
          typeof window.NativeBridge !== "undefined" ||
          typeof window.ReactNativeWebView !== "undefined";

        if (hasNativeBridge) {
          window.NativeBridge.showNotification(
            "Hello from WebView!",
            "This is a test notification sent from the webview to the native app. --Alok",
          );
        } else {
          // Fallback for browser testing
          if ("Notification" in window) {
            if (Notification.permission === "granted") {
              new Notification("Hello from WebView!", {
                body: "This is a test notification sent from the webview.",
                icon: "/favicon.ico",
              });
            } else if (Notification.permission !== "denied") {
              Notification.requestPermission().then((permission) => {
                if (permission === "granted") {
                  new Notification("Hello from WebView!", {
                    body: "This is a test notification sent from the webview.",
                    icon: "/favicon.ico",
                  });
                }
              });
            }
          } else {
            alert("Notifications are not supported in this browser.");
          }
        }
      }

      document.getElementById("imageInput").addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (!file) return;
        showImage(URL.createObjectURL(file));
      });

      document.getElementById("fileInput").addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (!file) return;
        fileNameEl.innerText = `Selected file: ${file.name}`;
      });

      /* ---------------- NATIVE BRIDGE LISTENER ---------------- */
      window.addEventListener("message", (event) => {
        try {
          const message = JSON.parse(event.data);

          switch (message.type) {
            case "image-captured":
            case "image-selected":
              showImage(message.data); // expect base64 or file URI
              break;

            case "file-selected":
              fileNameEl.innerText = `Selected file: ${message.data.name || "file"}`;
              break;
          }
        } catch (_) {}
      });

      console.log(hasNative ? "NativeBridge detected" : "Running in browser");
    </script>
  </body>
</html>
